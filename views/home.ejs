<%- include("header") -%>

<div class="ExpenseChart">
  <canvas id="priceChart" width="400" height="200"></canvas>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const prices1 = <%= JSON.stringify(prices1) %>;
      const prices2 = <%= JSON.stringify(prices2) %>;
      const averages = <%= JSON.stringify(averages) %>;

      const ctx = document.getElementById('priceChart').getContext('2d');
      const chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: Array.from({ length: Math.max(prices1.length, prices2.length) }, (_, i) => i + 1),
          datasets: [
            {
              label: 'Income',
              data: prices1,
              borderColor: 'green',
              fill: false
            },
            {
              label: 'Expense',
              data: prices2,
              borderColor: 'red',
              fill: false
            },
            {
              label: 'Average',
              data: averages,
              borderColor: 'blue',
              fill: false
            }
          ]
        },
        options: {
          responsive: true,
          scales: {
            x: {
              title: {
                display: true,
                text: 'Time'
              }
            },
            y: {
              title: {
                display: true,
                text: 'Price'
              }
            }
          }
        }
      });
    });
  </script>
</div>

<div class="Recent">

  <% Items.forEach(function(item){  %>
    <a href="/Item/<%= item.id %>" class="InTitle">
    <div class="d-flex justify-content-center">
    <div class="card GetRecent" style="width: 70% " >
      <div class="card-body row d-flex justify-content-center">

        <div class="col-auto">
          <h3 class="card-title" style="  color: rgba(0,0,0,0.78) !important;"><strong><%= item.title %></strong></h3>
        </div>
        <div class="col-auto" style="padding:5px">
          <h4 class="card-subtitle mb-2 text-body-secondary" style="color:purple!important">$ <%= item.amount %></h4>
        </div>
      <div class="col-auto" style="padding:7px" >
        <h5 class="card-subtitle mb-2 text-body-secondary"><%= item.date.toLocaleDateString("en-US",{weekday:"long",year: "numeric",month: "long",day: "numeric",}) %></h5>
        </div>

      </div>
    </div>
    </div>
    </a>
  <% })  %>

</div>


<%- include("footer") -%>
